<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RFID Status</title>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDApyR0KFpoSQDdimQImVq01sYH4uW9DaE",
            authDomain: "rfid-296ab.firebaseapp.com",
            databaseURL: "https://rfid-296ab-default-rtdb.firebaseio.com",
            projectId: "rfid-296ab",
            storageBucket: "rfid-296ab.appspot.com",
            messagingSenderId: "1097708630883",
            appId: "1:1097708630883:web:2dbf62e5ffcaafd1611956",
            measurementId: "G-CD4VVCR59Q"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Function to fetch and display RFID statuses
        function fetchRFIDStatuses() {
            const tagsRef = ref(database, '/');
            onValue(tagsRef, (snapshot) => {
                const data = snapshot.val();
                const displayDiv = document.getElementById('display');

                // Clear the previous contents
                displayDiv.innerHTML = '';

                // Loop through the tags
                for (const tag in data) {
                    if (data[tag].status) {
                        // Create a new paragraph for each tag status
                        const statusText = `ID ${tag}: ${data[tag].status}`;
                        const p = document.createElement('p');
                        p.textContent = statusText;
                        displayDiv.appendChild(p);
                    }
                }
            }, {
                onlyOnce: false // Set to true if you want to fetch data only once
            });
        }

        // Call the function on page load
        window.onload = fetchRFIDStatuses;
    </script>
</head>
<body>
    <h1>RFID Status</h1>
    <div id="display"></div>
</body>
</html>
